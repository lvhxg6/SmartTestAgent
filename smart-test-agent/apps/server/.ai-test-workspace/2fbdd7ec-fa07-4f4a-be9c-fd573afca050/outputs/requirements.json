{
  "version": "1.0",
  "prd_source": "./inputs/prd.md",
  "extracted_at": "2026-02-11T15:45:00.000Z",
  "requirements": [
    {
      "requirement_id": "REQ-001",
      "title": "扫描类型Tab切换",
      "description": "页面顶部提供Tab切换，支持基线检测、弱口令检测、系统漏洞、外部漏洞四种扫描类型的配置切换。切换Tab时加载对应扫描类型的配置数据，若有未保存的修改需提示用户是否保存。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 页面顶部展示四个Tab：基线检测、弱口令检测、系统漏洞、外部漏洞",
        "AC2: 点击Tab切换时加载对应扫描类型的配置数据",
        "AC3: 有未保存修改时切换Tab弹出确认弹框，提供保存和不保存选项"
      ],
      "source_section": "3.1 页面入口 & 10.1 Tab切换",
      "tags": ["tab-switch", "navigation"]
    },
    {
      "requirement_id": "REQ-002",
      "title": "自动下发开关控制",
      "description": "通过Switch开关控制自动调度是否生效。开启时需校验配置完整性，关闭时需二次确认并提示关闭后将取消待执行的自动调度任务。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 页面展示是否开启Switch开关",
        "AC2: 开启时若配置不完整，提示先完善配置并列出缺失项",
        "AC3: 关闭时弹出二次确认弹框，提示关闭后将取消待执行的自动调度任务，已有的手动调度任务不受影响",
        "AC4: 确认后调用接口切换开关状态"
      ],
      "source_section": "4.1 配置项UI设计 & 10.3 开关切换",
      "tags": ["switch", "config"]
    },
    {
      "requirement_id": "REQ-003",
      "title": "自动下发参数配置",
      "description": "配置自动下发的基本参数，包括每月开始扫描日期、开始时间、单个任务下发最大资产数、任务超时最大等待时间、自动任务创建用户。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 每月开始扫描日期为Select下拉选择，范围1-31",
        "AC2: 开始时间为Select下拉选择，范围0-23整点小时",
        "AC3: 单个任务下发最大资产数为InputNumber，范围1-500",
        "AC4: 任务超时最大等待时间为InputNumber，范围1-10小时",
        "AC5: 自动任务创建用户为Select下拉选择，数据来自接口",
        "AC6: 所有字段必填，校验不通过时显示对应错误提示"
      ],
      "source_section": "4.1 配置项UI设计 & 4.2 前端校验规则",
      "tags": ["form", "config", "validation"]
    },
    {
      "requirement_id": "REQ-004",
      "title": "盲时配置管理",
      "description": "配置不允许下发扫描任务的时间段（盲时），支持整月、整日、时间段三种类型。通过表格动态增删行管理盲时规则。",
      "priority": "P1",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 盲时列表以表格形式展示，支持动态添加和删除行",
        "AC2: 支持三种盲时类型：整月（MonthPicker）、整日（InputNumber 1-31）、时间段（TimePicker范围）",
        "AC3: 时间段盲时开始时间必须小于结束时间，不支持跨天配置",
        "AC4: 下发任务距离忙时间隔为InputNumber，单位小时",
        "AC5: 保存时调用后端接口校验盲时配置是否导致全年无可执行时间"
      ],
      "source_section": "5. 自动下发时间（业务系统忙时）",
      "tags": ["blind-time", "config", "table"]
    },
    {
      "requirement_id": "REQ-005",
      "title": "自动下发资产范围配置",
      "description": "配置自动下发的资产范围，包括资产类型筛选（全部/仅上报/非上报）和业务系统范围选择（TreeSelect树形多选）。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 资产范围为Radio单选：全部资产、仅上报资产、非上报资产",
        "AC2: 业务系统范围为TreeSelect树形多选下拉，支持按名称模糊搜索",
        "AC3: 勾选不联动（勾选父节点不自动勾选子节点）",
        "AC4: 外部漏洞Tab下显示提示文案：外部漏洞扫描仅针对应用类型资产"
      ],
      "source_section": "6. 自动下发资产范围",
      "tags": ["asset-scope", "config", "tree-select"]
    },
    {
      "requirement_id": "REQ-006",
      "title": "自动下发模式配置",
      "description": "配置扫描工具和合规模板。工具以Card卡片单选展示，模板为Select下拉选择。切换工具时模板列表重新加载。基线检测和弱口令检测额外显示保存原始结果Checkbox。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 工具以Card卡片形式展示，支持单选，显示工具名称和版本",
        "AC2: 合规模板为Select下拉选择，支持关键字模糊查询",
        "AC3: 切换工具时模板列表重新加载，若当前模板不在新列表中则清空",
        "AC4: 工具无可选模板时，模板下拉框禁用并显示提示文案",
        "AC5: 基线检测和弱口令检测Tab显示保存原始结果Checkbox（默认勾选）",
        "AC6: 系统漏洞和外部漏洞Tab不显示保存原始结果选项"
      ],
      "source_section": "7. 自动下发模式",
      "tags": ["tool-select", "template", "config"]
    },
    {
      "requirement_id": "REQ-007",
      "title": "配置保存功能",
      "description": "点击保存按钮时先进行前端校验，校验通过后调用后端接口保存配置。保存前需校验盲时配置有效性。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 点击保存按钮触发前端表单校验",
        "AC2: 前端校验通过后调用盲时配置校验接口",
        "AC3: 盲时校验通过后调用保存接口",
        "AC4: 保存成功显示成功提示，保存失败显示错误信息"
      ],
      "source_section": "10.2 配置保存",
      "tags": ["save", "validation"]
    },
    {
      "requirement_id": "REQ-008",
      "title": "自动扫描情况跟踪弹框",
      "description": "展示自动下发的执行记录列表，支持按月份、业务系统、状态筛选，支持分页和自动刷新（30秒）。列表展示序号、月份、执行轮次、目标名称、失败业务系统、执行时间、状态、操作列。",
      "priority": "P1",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 点击自动扫描情况跟踪按钮弹出弹框",
        "AC2: 弹框包含月份、业务系统、状态三个筛选条件",
        "AC3: 列表展示序号、月份、执行轮次、目标名称、失败业务系统、执行时间、状态、操作列",
        "AC4: 状态列使用对应颜色的Tag展示",
        "AC5: 目标名称和失败业务系统支持鼠标悬停Tooltip显示详情",
        "AC6: pending状态显示计划执行时间，waiting状态显示-",
        "AC7: pending和skipped状态无查看明细链接",
        "AC8: cancelled状态的记录不展示",
        "AC9: 支持手动刷新按钮和30秒自动刷新"
      ],
      "source_section": "8.3 自动扫描情况跟踪弹框",
      "tags": ["round-tracking", "modal", "table"]
    },
    {
      "requirement_id": "REQ-009",
      "title": "轮次执行明细弹框",
      "description": "点击查看明细后展示本轮每个业务系统的执行详情，包括业务系统名称、资产数、AMR任务名称、任务状态、开始时间、结束时间、失败原因。",
      "priority": "P1",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 点击查看明细链接弹出明细弹框",
        "AC2: 弹框顶部展示轮次基本信息（轮次标识、执行时间、状态）",
        "AC3: 明细表格展示序号、业务系统名称、资产数、AMR任务名称、任务状态、开始时间、结束时间、失败原因",
        "AC4: 任务状态使用对应颜色的Tag展示"
      ],
      "source_section": "8.4 轮次执行明细弹框",
      "tags": ["round-detail", "modal", "table"]
    },
    {
      "requirement_id": "REQ-010",
      "title": "手动下发新一轮次弹框",
      "description": "支持手动触发新一轮扫描，可选择定时开始时间和资产范围。资产范围支持全部、上次扫描失败资产、本轮未扫描到的资产。需处理存在pending手动调度时的交互规则。",
      "priority": "P0",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 点击下发新一轮次任务按钮弹出配置弹窗",
        "AC2: 定时开始时间为DateTimePicker，可不选（立即执行）",
        "AC3: 资产范围为Checkbox复选框组：全部、上次扫描失败资产、本轮未扫描到的资产",
        "AC4: 选择全部时其他两项置灰不可选",
        "AC5: 上次扫描失败资产和本轮未扫描到的资产可同时勾选",
        "AC6: 存在waiting/running状态轮次时提示等待完成",
        "AC7: 定时时间在盲时内或距盲时间隔内时提示重新选择",
        "AC8: 立即执行时当前处于盲时则提示选择定时执行时间",
        "AC9: 存在pending手动调度时选择定时时间则更新原记录",
        "AC10: 存在pending手动调度时立即执行则弹出确认框"
      ],
      "source_section": "8.5 手动下发新一轮次弹框",
      "tags": ["manual-trigger", "modal", "write-operation"]
    },
    {
      "requirement_id": "REQ-011",
      "title": "开始时间智能调度校验",
      "description": "选择开始时间后调用后端接口校验是否在盲时范围内，若时间被自动调整则显示警告提示和实际执行时间。",
      "priority": "P1",
      "testable": true,
      "route": "/AUTO_SCAN_CONFIG",
      "acceptance_criteria": [
        "AC1: 选择开始时间后自动调用校验接口",
        "AC2: 时间被调整时显示warning状态和调整原因",
        "AC3: 时间未调整时清除提示信息",
        "AC4: 页面右上角展示下次执行时间信息"
      ],
      "source_section": "4.2 前端校验规则",
      "tags": ["validation", "smart-schedule"]
    }
  ]
}
